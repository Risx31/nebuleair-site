<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NebuleAir - Dashboard</title>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body class="light"> <header class="topbar">
      <div class="nav-left">
          <div class="logo">â˜ï¸ NebuleAir</div>
          <nav>
              <ul class="nav-links">
                  <li><a href="index.html" class="active">Dashboard</a></li>
                  <li><a href="comparaison.html">Comparaison</a></li>
                  <li><a href="status.html">Status</a></li>
                  <li><a href="settings.html">ParamÃ¨tres</a></li>
              </ul>
          </nav>
      </div>
      <div class="nav-right">
          <button id="themeToggle" class="theme-btn" title="Changer de thÃ¨me">ğŸŒ“</button>
          <div class="user-profile" id="userProfileBanana" style="cursor:pointer">ğŸŒ</div>
      </div>
  </header>

  <main class="dashboard-container">
    
    <div class="stats-grid">
      <div class="card stat-card">
        <div class="card-label">PM1</div>
        <div class="card-value" id="pm1-value">--</div>
        <div class="card-unit">Âµg/mÂ³</div>
      </div>
      <div class="card stat-card">
        <div class="card-label">PM2.5</div>
        <div class="card-value" id="pm25-value">--</div>
        <div class="card-unit">Âµg/mÂ³</div>
      </div>
      <div class="card stat-card">
        <div class="card-label">PM10</div>
        <div class="card-value" id="pm10-value">--</div>
        <div class="card-unit">Âµg/mÂ³</div>
      </div>
      <div class="card stat-card">
        <div class="card-label">TempÃ©rature</div>
        <div class="card-value" id="temp-value">--</div>
        <div class="card-unit">Â°C</div>
      </div>
      <div class="card stat-card">
        <div class="card-label">HumiditÃ©</div>
        <div class="card-value" id="hum-value">--</div>
        <div class="card-unit">%</div>
      </div>
      <div class="card stat-card">
        <div class="card-label">Signal WiFi</div>
        <div class="card-value" id="wifi-value">--</div>
        <div class="card-unit">dBm</div>
      </div>
    </div>

    <div class="chart-section card">
      <div class="chart-header">
        <div class="chart-title">Analyse des donnÃ©es</div>
        <div class="chart-controls">
          <button class="btn-range active" data-range="1h">1h</button>
          <button class="btn-range" data-range="24h">24h</button>
          <button class="btn-range" data-range="7j">7j</button>
          <button class="btn-range" data-range="30j">30j</button>
        </div>
      </div>
      
      <div class="chart-canvas-container">
        <canvas id="mainChart"></canvas>
      </div>

      <div class="chart-footer">
        <label><input type="checkbox" id="pm1-toggle" checked> PM1</label>
        <label><input type="checkbox" id="pm25-toggle" checked> PM2.5</label>
        <label><input type="checkbox" id="pm10-toggle" checked> PM10</label>
        <label><input type="checkbox" id="temp-toggle" checked> Temp</label>
        <label><input type="checkbox" id="hum-toggle" checked> Hum</label>
      </div>
    </div>

    <div class="bottom-grid">
      <div class="map-card card">
        <div class="card-title">ğŸ“ Position du capteur</div>
        <div id="map" style="height: 300px; border-radius: 8px;"></div>
      </div>

      <div class="export-card card">
        <div class="card-title">ğŸ“¥ Exportation</div>
        <div class="form-group">
          <label>DÃ©but</label>
          <input type="date" id="start-date" class="form-input">
        </div>
        <div class="form-group">
          <label>Fin</label>
          <input type="date" id="end-date" class="form-input">
        </div>
        <button id="apply-range" class="btn-secondary" style="width: 100%; margin-bottom: 10px;">Appliquer</button>
        
        <div class="form-group">
          <label>FrÃ©quence (minutes)</label>
          <select id="export-freq" class="form-input">
            <option value="1">Toutes les minutes</option>
            <option value="5">Toutes les 5 min</option>
            <option value="30">Toutes les 30 min</option>
            <option value="60">Toutes les heures</option>
          </select>
        </div>
        <button id="export-csv" class="btn-primary" style="width: 100%;">ğŸ“¤ TÃ©lÃ©charger le CSV</button>
      </div>
    </div>

  </main>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="assets/js/snake.js"></script>
  <script src="assets/js/dashboard.js"></script>

  <div id="snake-container" class="snake-hidden">
    <div id="snake-panel">
      <div class="snake-header">
        <h2>ğŸ NebuleSnake</h2>
        <button id="snake-close">&times;</button>
      </div>
      <canvas id="snakeCanvas" width="400" height="400"></canvas>
      <p class="snake-score">Score : <span id="snake-score-current">0</span></p>
    </div>
  </div>

</body>
</html>
